#include <msp430.h>
#include "led.h"

extern volatile char ledToggleFlag; // Declare the flag defined in buttons.c

void wdt_c_handler() {
    static int cycleCount = 0;

    if (ledToggleFlag) { // Check if the flag is set
        cycleCount++;
        if (cycleCount >= 50) { // Toggle every ~0.5 seconds
            cycleCount = 0;       // Reset the counter
            P1OUT ^= BIT0;     // Call the LED toggle function
        }
    }
}

void __interrupt_vec(WDT_VECTOR) WDT() {
    wdt_c_handler();  // Call the WDT handler
}
